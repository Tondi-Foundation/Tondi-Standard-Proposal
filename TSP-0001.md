# **TSP-0001**: Support Kaspa-Compatible Payment Types with Extended Taproot

**Proposal Number**: TSP-0001  
**Proposal Name**: Support Kaspa-Compatible Payment Types with Extended Taproot  
**Proposal Status**: Implemented  
**Author**: Tondi Foundation Development Team  
**Creation Date**: 2024-11-05  
**Target Version**: Tondi Genesis (v2025a)  
**Protocol Scope**: Transaction validation rules, script structure, signature algorithm  

---

### üîç Overview

This proposal defines the Tondi chain as a blockchain network that **inherits full backward compatibility with all Kaspa payment types** while introducing **native Taproot (P2TR) support**. Specifically:

* Legacy Kaspa-compatible outputs (P2PK, P2PKH, P2SH, P2WPKH, multisig, etc.) remain valid;
* **Taproot (P2TR) outputs** are added, supporting both key-path and script-path spending;
* All Schnorr signatures in Taproot follow **BIP-340**, ensuring compatibility with Bitcoin‚Äôs cryptography stack;
* Default address formats include both **Kaspa-style encoding** and **Bech32m with prefix `tondi`** for Taproot.

This hybrid approach balances **compatibility and innovation**, allowing Tondi to support existing Kaspa tooling while enabling advanced features such as RGB contract anchoring and high-frequency validation.

---

### üéØ Goals

* Maintain backward compatibility with all Kaspa-standard payment types;
* Introduce Taproot support for advanced contract anchoring and privacy;
* Preserve script-based programmability (P2SH, script path in Taproot);
* Enable broader wallet and tooling compatibility from day one;
* Establish a flexible foundation for future extensions and soft-fork upgrades.

---

### üîß Technical Details

1. **Output Type Specification**

   * **Supported outputs**:

     * P2PK
     * P2PKH
     * P2SH
     * P2WPKH
     * Multisig scripts
     * Taproot (P2TR: both key path & script path)
   * Example (Taproot key path):

     ```
     scriptPubKey = OP_1 || <32-byte x-only pubkey>
     ```

2. **Signature and Verification**

   * Legacy outputs: validation rules remain identical to Kaspa consensus.
   * Taproot outputs:

     * Key path spend follows BIP-341 + BIP-340 Schnorr validation;
     * Script path spend is supported, including witness version 1 + control block.

3. **Address Formats**

   * Kaspa-compatible address formats remain valid;
   * Taproot addresses use **Bech32m** encoding with prefix `tondi`;
   * Example length: 59 characters including checksum.

4. **Script Support**

   * Script Path in Taproot is fully enabled;
   * Existing script-based contracts (P2SH, multisig) continue to function;
   * No restrictions are imposed on OP codes beyond Kaspa‚Äôs baseline consensus rules.

---

### ‚ö†Ô∏è Backward Compatibility & Security

* All Kaspa transaction types remain valid, ensuring smooth migration of tooling and wallets;
* Taproot integration is additive, not disruptive;
* Schnorr signatures (BIP-340) provide stronger privacy and batch-verification performance;
* By retaining Script Path, developers can build advanced contracts natively without protocol redesign.

---

### üìù Additional Notes

Upon approval of this proposal:

* Tondi nodes must validate both Kaspa-compatible and Taproot outputs;
* Subsequent proposals (e.g., TSP-0002, TSP-0003) will assume this hybrid compatibility model as the baseline;
* Developers are encouraged to prefer Taproot for new applications, but legacy scripts remain supported indefinitely.

---

If there are no objections, this proposal shall be included as part of the **Tondi Genesis Protocol**, numbered **TSP-0001**.

---